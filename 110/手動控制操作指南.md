


# æ²æšæ©Ÿæ‰‹å‹•æ§åˆ¶æ“ä½œæŒ‡å—

## ğŸ“‹ å‰ç½®æº–å‚™

### 1. ç¢ºèª Arduino WiFi è¨­å®š
åœ¨ `top_base_upd_test2.ino` ä¸­ç¢ºèª WiFi è¨­å®šï¼ˆç¬¬ 309 è¡Œï¼‰ï¼š
```cpp
set_microros_wifi_transports("WiFi_SSID", "WiFi_å¯†ç¢¼", "Agent_IP", 2024);
```

### 2. ç¢ºèª Agent IP åœ°å€
- åœ¨é›»è…¦ä¸ŠåŸ·è¡Œï¼š`ip -4 a | grep inet`
- æ‰¾åˆ°ä½ çš„ IP åœ°å€ï¼ˆä¸è¦ç”¨ 5G ç¶²è·¯ï¼Œä¸è¦æŠ“ `/` é–‹é ­çš„ï¼‰
- ç¢ºä¿ Arduino ç¨‹å¼ç¢¼ä¸­çš„ Agent IP èˆ‡æ­¤ IP ä¸€è‡´

---

## ğŸš€ æ“ä½œæ­¥é©Ÿ

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ manual.py ç¯€é»ï¼ˆæ¨è–¦ï¼‰

#### æ­¥é©Ÿ 1ï¼šå•Ÿå‹• Micro-ROS Agent
é–‹å•Ÿ**ç¬¬ä¸€å€‹çµ‚ç«¯æ©Ÿ**ï¼ŒåŸ·è¡Œï¼š
```bash
MicroXRCEAgent udp4 --port 2024 -v6
```
**é‡è¦ï¼š** Agent å¿…é ˆåœ¨ Arduino é€£æ¥å‰å•Ÿå‹•ï¼Œä¸”ä¿æŒé‹è¡Œç‹€æ…‹ã€‚

#### æ­¥é©Ÿ 2ï¼šå•Ÿå‹• ROS 2 ç’°å¢ƒ
é–‹å•Ÿ**ç¬¬äºŒå€‹çµ‚ç«¯æ©Ÿ**ï¼ŒåŸ·è¡Œï¼š
```bash
cd ~/114/110/ros2_ws
source install/setup.bash
```

#### æ­¥é©Ÿ 3ï¼šå•Ÿå‹•æ‰‹å‹•æ§åˆ¶ç¯€é»
åœ¨åŒä¸€å€‹çµ‚ç«¯æ©ŸåŸ·è¡Œï¼š
```bash
ros2 run manual manual.py
```

#### æ­¥é©Ÿ 4ï¼šè¼¸å…¥æ§åˆ¶å‘½ä»¤
ç¨‹å¼æœƒæç¤º `Enter a letter:`ï¼Œè¼¸å…¥ä»¥ä¸‹å­—æ¯æ§åˆ¶ï¼š
- **`w`** æˆ– **`t`**ï¼šå‘ä¸Šç§»å‹•ï¼ˆY è»¸ -1ï¼‰
- **`s`** æˆ– **`g`**ï¼šå‘ä¸‹ç§»å‹•ï¼ˆY è»¸ +1ï¼‰
- **`a`**ï¼šå‘å·¦ç§»å‹•ï¼ˆX è»¸ -1ï¼‰
- **`d`**ï¼šå‘å³ç§»å‹•ï¼ˆX è»¸ +1ï¼‰

**æ³¨æ„ï¼š** æ¯æ¬¡è¼¸å…¥ä¸€å€‹å­—æ¯å¾ŒæŒ‰ Enterï¼Œå‘½ä»¤æœƒåŠ å…¥ä½‡åˆ—ä¾åºåŸ·è¡Œã€‚

---

### æ–¹æ³•äºŒï¼šç›´æ¥ä½¿ç”¨ ros2 topic pub å‘½ä»¤

#### æ­¥é©Ÿ 1ï¼šå•Ÿå‹• Micro-ROS Agentï¼ˆåŒä¸Šï¼‰
```bash
MicroXRCEAgent udp4 --port 2024 -v6
```

#### æ­¥é©Ÿ 2ï¼šå•Ÿå‹• ROS 2 ç’°å¢ƒ
```bash
cd ~/114/110/ros2_ws
source install/setup.bash
```

#### æ­¥é©Ÿ 3ï¼šç™¼å¸ƒç§»å‹•å‘½ä»¤
é–‹å•Ÿ**æ–°çš„çµ‚ç«¯æ©Ÿ**ï¼ŒåŸ·è¡Œä»¥ä¸‹ä»»ä¸€å‘½ä»¤ï¼š

**å‘ä¸Šç§»å‹•ï¼š**
```bash
ros2 topic pub /keyboard_input std_msgs/msg/String "data: 'w'"
# æˆ–
ros2 topic pub /keyboard_input std_msgs/msg/String "data: 't'"
```

**å‘ä¸‹ç§»å‹•ï¼š**
```bash
ros2 topic pub /keyboard_input std_msgs/msg/String "data: 's'"
# æˆ–
ros2 topic pub /keyboard_input std_msgs/msg/String "data: 'g'"
```

**å‘å·¦ç§»å‹•ï¼š**
```bash
ros2 topic pub /keyboard_input std_msgs/msg/String "data: 'a'"
```

**å‘å³ç§»å‹•ï¼š**
```bash
ros2 topic pub /keyboard_input std_msgs/msg/String "data: 'd'"
```

**é€£çºŒç§»å‹•ï¼ˆä¾‹å¦‚é€£çºŒå‘å³ç§»å‹• 5 æ¬¡ï¼‰ï¼š**
```bash
ros2 topic pub /keyboard_input std_msgs/msg/String "data: 'ddddd'"
```

---

### æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ /move2 topicï¼ˆç›´æ¥æ§åˆ¶ï¼‰

ä¹Ÿå¯ä»¥ç›´æ¥ç™¼å¸ƒåˆ° `/move2` topicï¼š

```bash
ros2 topic pub /move2 std_msgs/msg/String "data: 'd'"
```

**æ³¨æ„ï¼š** `/move2` æœ‰ 100ms çš„ç§»å‹•é–“éš”é™åˆ¶ï¼Œè€Œ `/keyboard_input` ä½¿ç”¨å‘½ä»¤ä½‡åˆ—ï¼Œå¯ä»¥é€£çºŒç™¼é€å¤šå€‹å‘½ä»¤ã€‚

---

## ğŸ“Š ç›£æ§ç‹€æ…‹

### æŸ¥çœ‹ç•¶å‰ä½ç½®
```bash
ros2 topic echo /top_base_Coordinates
```

### æŸ¥çœ‹å®šä½è¨Šæ¯
```bash
ros2 topic echo /top_base_locate
```

### æŸ¥çœ‹æ‰€æœ‰ topic
```bash
ros2 topic list
```

---

## âš ï¸ æ³¨æ„äº‹é …

1. **Micro-ROS Agent å¿…é ˆå…ˆå•Ÿå‹•**ï¼šArduino é€£æ¥å‰ï¼ŒAgent å¿…é ˆå·²åœ¨é‹è¡Œ
2. **WiFi é€£æ¥**ï¼šç¢ºä¿ Arduino èˆ‡é›»è…¦åœ¨åŒä¸€ WiFi ç¶²è·¯
3. **IP åœ°å€ä¸€è‡´æ€§**ï¼šArduino ç¨‹å¼ç¢¼ä¸­çš„ Agent IP å¿…é ˆèˆ‡é›»è…¦å¯¦éš› IP ä¸€è‡´
4. **åº§æ¨™ç¯„åœ**ï¼šç§»å‹•ç¯„åœé™åˆ¶åœ¨ `(0, 0)` åˆ° `(79, 49)` ä¹‹é–“
5. **ç§»å‹•é–“éš”**ï¼š`/move2` æœ‰ 100ms é–“éš”é™åˆ¶ï¼Œ`/keyboard_input` ä½¿ç”¨ä½‡åˆ—å¯é€£çºŒç™¼é€

---

## ğŸ”§ æ•…éšœæ’é™¤

### Arduino ç„¡æ³•é€£æ¥
1. æª¢æŸ¥ Micro-ROS Agent æ˜¯å¦æ­£åœ¨é‹è¡Œ
2. æª¢æŸ¥ WiFi SSIDã€å¯†ç¢¼ã€IP æ˜¯å¦æ­£ç¢º
3. æª¢æŸ¥é˜²ç«ç‰†æ˜¯å¦é˜»æ“‹ UDP 2024 ç«¯å£
4. æŸ¥çœ‹ Arduino Serial Monitor çš„éŒ¯èª¤è¨Šæ¯

### å‘½ä»¤ç„¡åæ‡‰
1. æª¢æŸ¥ topic æ˜¯å¦æ­£ç¢ºï¼š`ros2 topic list`
2. æª¢æŸ¥ Arduino æ˜¯å¦å·²é€£æ¥ï¼š`ros2 node list`
3. æª¢æŸ¥åº§æ¨™æ˜¯å¦è¶…å‡ºç¯„åœ

### ç§»å‹•æ–¹å‘éŒ¯èª¤
- æª¢æŸ¥ Arduino ç¨‹å¼ç¢¼ä¸­çš„æ–¹å‘è¨­å®šï¼ˆ`xdirPin`, `ydirPin`ï¼‰
- æª¢æŸ¥ `x_correction_factor` åƒæ•¸ï¼ˆç›®å‰ç‚º 2ï¼‰

---

## ğŸ“ å¿«é€Ÿåƒè€ƒ

| å‘½ä»¤ | åŠŸèƒ½ | Topic |
|------|------|-------|
| `w` æˆ– `t` | å‘ä¸Šç§»å‹• | `/keyboard_input` æˆ– `/move2` |
| `s` æˆ– `g` | å‘ä¸‹ç§»å‹• | `/keyboard_input` æˆ– `/move2` |
| `a` | å‘å·¦ç§»å‹• | `/keyboard_input` æˆ– `/move2` |
| `d` | å‘å³ç§»å‹• | `/keyboard_input` æˆ– `/move2` |

---

## ğŸ¯ å®Œæ•´å•Ÿå‹•æµç¨‹ç¯„ä¾‹

```bash
# çµ‚ç«¯æ©Ÿ 1ï¼šå•Ÿå‹• Micro-ROS Agent
MicroXRCEAgent udp4 --port 2024 -v6

# çµ‚ç«¯æ©Ÿ 2ï¼šå•Ÿå‹• ROS 2 å’Œæ‰‹å‹•æ§åˆ¶
cd ~/114/110/ros2_ws
source install/setup.bash
ros2 run manual manual.py

# çµ‚ç«¯æ©Ÿ 3ï¼šç›£æ§ç‹€æ…‹ï¼ˆå¯é¸ï¼‰
ros2 topic echo /top_base_Coordinates
```

